{% extends "base.html" %}

{% block content %}
    <h1 id="header_add_question">
        Создать вопрос
    </h1>

    <div id="register_div">
        <form action="" method="post" enctype="multipart/form-data">
                {{ form.hidden_tag() }}
                <div class="div_label_and_input">
                    <div class="register_label" id="register_label_top">{{ form.text.label }}</div>
                    <div class="register_input_div">{{ form.text(class="register_input") }}</div>
                    {% for error in form.text.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                    {% endfor %}
                </div>

                <div class="div_label_and_input">
                    <div class="register_label">{{ form.answer.label }}</div>
                    <div class="register_input_div">{{ form.answer(class="register_input") }}</div>
                    {% for error in form.answer.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                    {% endfor %}
                </div>
                <div class="div_label_and_input">
                   <div class="register_label">{{ form.comment.label }}</div>
                    <div class="register_input_div">{{ form.comment(class="register_input") }}</div>
                    {% for error in form.comment.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                    {% endfor %}
                </div>
                <div class="div_label_and_input">
                    <div class="register_label">{{ form.category.label }}</div>
                    <div class="register_input_div">{{ form.category(class="register_input") }}</div>
                    {% for error in form.category.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                    {% endfor %}
                </div>

                <div class="div_label_and_input">
                    <div class="register_label">Добавьте картинку</div>
                    <input type="file" id="photo" name="file" class="register_input" accept="image/*">
                    <div style="width: 100%; margin: auto; text-align: center; margin-bottom: 20px; margin-top: 10px;">
                        <label for="photo" class="input__file-button">Загрузите файл</label>
                    </div>
                    <div style="width: 100%; margin: auto; text-align: center;">
                        <img src="" alt="У этого вопроса не будет картинки" id="image_quest" style="max-width: 100%; color: black; margin: auto;">
                    </div>
                    <script>
                        $('#photo').change(function () {
                            var input = $(this)[0];
                            if (input.files && input.files[0]) {
                                if (input.files[0].type.match('image.*')) {
                                    var reader = new FileReader();
                                    reader.onload = function (e) {
                                        $('#image_quest').attr('src', e.target.result);
                                    }
                                    reader.readAsDataURL(input.files[0]);
                                } else {
                                    console.log('ошибка, не изображение');
                                }
                            } else {
                                console.log('хьюстон у нас проблема');
                            }
                        });
                    </script>
                </div>

                <div class="div_label_and_input">
                    <div class="register_label" id="top_from_photo">{{ form.type.label }}</div>
                    <div class="register_input_div">{{ form.type(class="register_input") }}</div>
                    {% for error in form.type.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                    {% endfor %}
                </div>

                <div class="div_label_and_input">
                    <div class="register_label">{{ form.complexity.label }}</div>
                    <div class="register_input_div">{{ form.complexity(class="register_input") }}</div>
                    {% for error in form.complexity.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                    {% endfor %}

                </div>

                <div class="div_label_and_input">
                    <div class="register_label">{{ form.wrong_answer1.label }}</div>
                    <div class="register_input_div">{{ form.wrong_answer1(class="register_input") }}</div>
                    {% for error in form.wrong_answer1.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                    {% endfor %}
                </div>

                <div class="div_label_and_input">
                    <div class="register_input_div">{{ form.wrong_answer2(class="register_input") }}</div>
                    {% for error in form.wrong_answer2.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                    {% endfor %}
                </div>

                <div class="div_label_and_input">
                    <div class="register_input_div">{{ form.wrong_answer3(class="register_input") }}</div>
                    {% for error in form.wrong_answer3.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                    {% endfor %}
                </div>

                <div id="register_button">{{ form.submit(type="submit", id="button_registerIN") }}</div>
                {% if message != "" %}
                    <div id="message" >{{ message }}</div>
                {% endif %}
            </form>
    </div>

{% endblock %}