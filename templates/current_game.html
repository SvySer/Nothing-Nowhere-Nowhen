{% extends "base.html" %}

{% block content %}
    <div id="game_div">
        {% if current_user.is_authenticated %}
            <img id="player_icon" src="/{{ current_user.avatar }}" width="70px" height="70px">
            <div id="player_name">{{ current_user.nickname }}</div>
        {% else %}
            <img id="player_icon" src="/static/img/users_avatars/no_photo.png" width="70px" height="70px">
            <div id="player_name">Гость</div>
        {% endif %}
        <img id="opponent_icon" src="/{{ user.avatar }}" width="70px" height="70px">
        <div id="opponent_name">{{ user.nickname }}</div>
        <h1 id="header_quest">Вопрос</h1>
        <div id="div_progressbar">
            <progress id="progressbar" value="{{ 60 - current_time }}" max="60">20</progress >
        </div>
        <div id="progress">{{ win }}:{{ defeat }}</div>
        <div id="question">
            {% if question.images == ' ' %}
                {{ question.text }}
            {% else %}
                <div id="div_question_text">
                    <p class="temp_p">{{ question.text }}</p>
                </div>
                <div id="div_question_image">
                    <p class="temp_p">
                        <img src="{{ question.images }}" alt="" id="question_image">
                    </p>
                </div>
            {% endif %}
        </div>
        <div id="div_question_time">
            <script>
                var time = {{ 60 - current_time }};

                function minusSec() {
                    time--;
                    if (time < 0) {
                        document.location.href = '{{ path }}';
                    } else {
                        document.getElementById('progressbar').value = time;
                    };
                };

                setInterval(minusSec, 1000);
            </script>
        </div>
        {% if type_quest == 'change' %}
            <p id="p_answers">Варианты:</p>
            <form class="login_form" method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <div id="div_questions_answers">
                        <div id='div_questions_answers_up'>
                            <div class="div_questions_answer" id="div_questions_answer1">
                                <input type="radio" name="option" value="{{ answers[0] }}" class="checkbox" id="checkbox1" onchange="changeRadioBox('checkbox1')"><div class="p_questions_answer"> {{ answers[0] }} </div>
                            </div>
                            <div class="div_questions_answer" id="div_questions_answer2">
                                <input type="radio" name="option" value="{{ answers[1] }}" class="checkbox" id="checkbox2" onchange="changeRadioBox('checkbox2')"><div class="p_questions_answer"> {{ answers[1] }} </div>
                            </div>
                        </div>
                        <div id='div_questions_answers_down'>
                            <div class="div_questions_answer" id="div_questions_answer3">
                                <input type="radio" name="option" value="{{ answers[2] }}" class="checkbox" id="checkbox3" onchange="changeRadioBox('checkbox3')"><div class="p_questions_answer"> {{ answers[2] }} </div>
                            </div>
                            <div class="div_questions_answer" id="div_questions_answer4">
                                <input type="radio" name="option" value="{{ answers[3] }}" class="checkbox" id="checkbox4" onchange="changeRadioBox('checkbox4')"><div class="p_questions_answer"> {{ answers[3] }} </div>
                            </div>
                        </div>
                        <input type="submit" value="Отправить" id="b_answer_question">
                    </div>
                </div>
            </form>
            <script>
                document.getElementById('checkbox1').style.left = String(document.getElementById('div_questions_answer1').getBoundingClientRect().x) + 'px';
                document.getElementById('checkbox2').style.left = String(document.getElementById('div_questions_answer2').getBoundingClientRect().x) + 'px';
                document.getElementById('checkbox3').style.left = String(document.getElementById('div_questions_answer3').getBoundingClientRect().x) + 'px';
                document.getElementById('checkbox4').style.left = String(document.getElementById('div_questions_answer4').getBoundingClientRect().x) + 'px';
                document.getElementById('checkbox1').style.width = String(document.getElementById('div_questions_answer1').style.width) + 'px';
                document.getElementById('checkbox2').style.width = String(document.getElementById('div_questions_answer2').style.width) + 'px';
                document.getElementById('checkbox3').style.width = String(document.getElementById('div_questions_answer3').style.width) + 'px';
                document.getElementById('checkbox4').style.width = String(document.getElementById('div_questions_answer4').style.width) + 'px';
                document.getElementById('checkbox4').style.width = String(document.getElementById('div_questions_answer4').style.width) + 'px';
            </script>
        {% elif type_quest == 'write' %}
            <p id="p_answers">Наберите ответ:</p>
            <form class="login_form" method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <div id="div_questions_answers">
                        <input type="text" name="option" id="input_text" autocomplete="off" oncontextmenu='return false;'>
                        <script>
                          input_text.onpaste = function(event) {
                            return false;
                          };
                        </script>
                        <input type="submit" value="Отправить" id="b_answer_question">
                    </div>
                </div>
            </form>
        {% endif %}
        <script src="/static/scripts/scriptForCurrentGame.js"></script>
    </div>
{% endblock %}